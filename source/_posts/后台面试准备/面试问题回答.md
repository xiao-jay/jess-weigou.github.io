---
title: 项目问题回答
excerpt: 自己出题自己回答
tags: [项目]
categories: 后端面试
banner_img: /img/壁纸.jpg
---

### 1、DM项目遇到过什么问题

- 为什么使用kafka



- 消息放进kafka但是消费者不能接受

  

- 出现kafka消费特别慢的情况



- redis lock release error : context deadline exceeded



- 二级缓存是怎么保持一致性的



### 2、MapReduce实验过程中遇到什么问题

- 死锁

​	在一个函数A中获得锁，然后在这个A函数调用另一个B函数，这个B函数也需要同一个锁，然后就死锁了。

- rpc调用赋值失败

```
ApplyForTask(args *ApplyForTaskArgs, reply *ApplyForTaskReply)
```

正确：

```
*reply = ApplyForTaskReply{
			TaskType:     task.Type,
			TaskIndex:    task.Index,
			MapNum:       c.nMap,
			ReduceNum:    c.nReduce,
			MapInputFile: task.MapInputFile,
		}
```

错误：

```
reply = &ApplyForTaskReply{
			TaskType:     task.Type,
			TaskIndex:    task.Index,
			MapNum:       c.nMap,
			ReduceNum:    c.nReduce,
			MapInputFile: task.MapInputFile,
		}
```



### 3、K8s集群部署的时候遇到什么问题和解决什么问题

#### 3.1构建集群阶段遇到的问题

- docker 和 kubelet 服务中的 cgroup 驱动不一致

cgroup和system驱动有啥区别



- 1.25版本的kubeadm的因为网络原因一直not ready，换成1.21就好了



- 镜像拉不下来

#### 3.2运行阶段遇到的问题

- 遇到磁盘空间不足导致打上taint，导致pod全部都被evicted（驱逐）

#### 3.3 解决了啥问题

- 通过打包成docker使算法工程师不用部署环境，不用重新配置conda环境，节省大量时间

- 通过构建私有镜像库提升了镜像拉取速度（100M/s）
- 日志收集系统，解决多机多日志问题

#### 3.4 没解决啥问题

- 推理服务所需要的依赖安装过于复杂不能简单的打入docker，比如需要github clone代码，还需要修改源码。
- GPU资源在一个云计算中心中，无公网ip，只能frp内网穿透暴露服务，现在是使用kafka+redis作为消息通信的媒介
- 

##### 3、项目遇到的问题

（1）跨域问题

​	产生原因：ajax请求只能同源请求，为了防止恶意行为，访问其他域的资源会出现跨域问题

​	解决方法：在http请求头部加上access-control-allow-origin

这又有一个问题，发现put请求还有跨域问题，看代码发现Access-Control-Allow-Methods只有post和get，加上put就可以。

##### 6、在路由的时候用group把工作模块的路由都包括了，但是细分到具体路由输入了“/”

```
selfInfo:=r.Group("/profiles/:phone")
    {
       selfInfo.GET("/",s.GetSelfDetail)
       selfInfo.PUT("/",s.ModifySelfDetail)
    }
```

像这样，最后url出来是/profiles/:phone/，这样gin会报一个307的错误，因为这样接口请求会被重定向，丢失Authorization头

##### 9、熟悉golang语言，有没有用过语言特性

1、用过交换的语法糖，只有for循环，并且for循环的时候是用循环地址，把值赋值给地址，然后输出这个地址的值，for循环把地址传给多个值，多个值会相同

2、知道切片扩充是开辟一个新内存再把原来的值复制进去，每次扩充容量都乘2，到1024之后每次扩充百分之25

3、defer调用的时候是倒叙调用

4、接口是鸭子类型，如果叫起来是鸭子，跑起来的鸭子，那他就是鸭子，写过自定义sort函数，重写sort函数接口



