---
title: 项目问题回答
excerpt: 自己出题自己回答
tags: [项目]
categories: 后端面试
banner_img: /img/壁纸.jpg
---

##### 1、接口设计遵循了什么规范

接口遵循restful规范，post，delete，put，get，分别对应增，删，改，查

get请求把请求数据放在header或者url上面

接口复用，比如work接口，用get请求表示获取工作信息，用post表示增加工作信息

##### 2、服务器上面装了什么

nginx作为web反向代理服务，mysql作为数据库，并发抗多少没试过

##### 3、项目遇到的问题

（1）接受前端给的信息，使用gin框架用shouldbind，bindjson，shouldbindjson等接受数据方法的选择

这几个方法区别是有should只会返回错误信息，不会自动在header里面自动加入400的错误码

（2）跨域问题

​	产生原因：ajax请求只能同源请求，为了防止恶意行为，访问其他域的资源会出现跨域问题

​	解决方法：在http请求头部加上access-control-allow-origin

这又有一个问题，发现put请求还有跨域问题，看代码发现Access-Control-Allow-Methods只有post和get，加上put就可以。

##### 4、部署到服务器方式奇特，因为用的windows server2012，我是直接在服务器上面下载goland并且运行，代码文件是直接复制过去的，这样就很吃内存，改进之后用ssh连接服务器并且传输文件给服务器，不用goland在cmd里面运行go程序

##### 5、进行部署的时候无代理拉不下来包，用goproxy解决

##### 6、在路由的时候用group把工作模块的路由都包括了，但是细分到具体路由输入了“/”

```
selfInfo:=r.Group("/profiles/:phone")
    {
       selfInfo.GET("/",s.GetSelfDetail)
       selfInfo.PUT("/",s.ModifySelfDetail)
    }
```



像这样，最后url出来是/profiles/:phone/，这样gin会报一个307的错误，因为这样接口请求会被重定向，丢失Authorization头

##### 7、er图设计中未考虑token，每个表的功能不清晰，混杂在一起，后期分成一张张功能明确的表（请介绍一下）

账号表一张，存储个人账号密码（MD5加密）token，一个表存放个人详细信息，身份证号之类的，另一个表存放工作信息，像绩效出勤之类的要经常改变的表就再分出来一个

##### 8、讲讲项目结构

一个service存放方法，有initconfig，initDB，initrouter，config文件里面把数据库配置信息读进来，database存放initDB，用来连接数据库，router里面存放接口，model里面存放各种表的结构体，method里面放路由方法，utils里面封装了错误和正确返回。

存在的问题：项目结构单一，不能满足面向对象的封装，继承，多态，且项目可复用性很差，无法灵活的增加需求，需要改动原来的代码。

##### 9、熟悉golang语言，有没有用过语言特性

1、用过交换的语法糖，只有for循环，并且for循环的时候是用循环地址，把值赋值给地址，然后输出这个地址的值，for循环把地址传给多个值，多个值会相同

2、知道切片扩充是开辟一个新内存再把原来的值复制进去，每次扩充容量都乘2，到1024之后每次扩充百分之25

3、defer调用的时候是倒叙调用

4、接口是鸭子类型，如果叫起来是鸭子，跑起来的鸭子，那他就是鸭子，写过自定义sort函数，重写sort函数接口

##### 10、golang GC了解吗

了解过，golang的垃圾回收，golang使用三色标记法，开始每个事件都是白色，扫描到一个进程，标记为灰色，就把他丢入队列，每次从队列取出来一个，从这个事件的开始遍历这个事件引出的其他事件，然后把这个事件标记成黑色，有二叉树层次遍历那味，不会重新遍历黑色的事件，知道灰色事件队列没事件了，清除白色事件。

GC触发条件：

1、长时间（2分钟）没GC，就GC一次

2、内存分配到一定比例

3、手动

###### 写屏障

因为程序与标记是并发运行的，可能这个事件已经是黑色的还会引出事件，这个时候新事件还是白色，会被清除，这个时候加入写屏障，约定在清扫开始前黑色事件不引出其他事件