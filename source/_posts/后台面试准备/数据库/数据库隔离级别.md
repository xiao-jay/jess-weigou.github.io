---
title: 数据库隔离
excerpt: 所在模块：数据库
tags: [数据库]
categories: 后台面试
banner_img: /img/壁纸.jpg
---

**数据库事务的定义：**一个或多个数据库操作

#### 事务的四大特性

A atom 原子性  事务执行是原子，一个事务中所有操作，要么全部完成，要么全部不完成，不会结束在中间的环节。

C Consistency 一致性	在事务开始和事务开始后，数据库的完整性约束没被破坏

​							完整性约束：主键的约束没有变，数据库中不能输入不符合约束的值。

I	isolation 隔离性	多个并发事务相互独立互不影响，多个用户的并发事务访问同一个数据库，一个用户的事务应该被隔离起来不被干扰。

D durability 持久性	事务处理后对数据的修改是永久的

#### 不考虑隔离级别会发生的事情

1、脏读

一个事务在处理数据时读到别的未提交事务的数据，然后这个数据回滚了

2、不可重复读

数据库中的某个数据，在一次事务中多次查询得到的数据不一致，因为另一个事务修改并且提交了

3、幻读

假如读取一个数据为1，然后修改为2，另一个事务把这个数据修改成1，第一个事务在读取这个数据还是为1好像未修改一样，这就是幻读，和不可重复读的共同点都是读取了已经提交的数据，但是不可重复读是一个数据，幻读是一批数据整体，解决不可重复读的办法**是锁行**，解决幻读的办法是**锁表**。

#### mysql四种隔离级别

1、读未提交

如果一个事物已经开始写数据，则另外一个事物则不允许同时进行写操作，但是允许读数据，会出现脏读。

2、读已提交

未提交的写事物禁止其他事物访问

​	可避免脏读

3、可重复读(数据库默认隔离级别)

sql第一次读取到数据后，就将这些数据加锁（悲观锁），其它事务无法修改这些数据，就可以实现可重复读了。

​	可避免脏读，不可重复读

4、串行化

​	可避免脏读，不可重复读和幻读

| 隔离界别                   | 脏读     | 不可重复读 | 幻读     |
| -------------------------- | -------- | ---------- | -------- |
| READ UNCOMMITTED：读未提交 | 可能发生 | 可能发生   | 可能发生 |
| READ COMMITTED：读已提交   | 解决     | 可能发生   | 可能发生 |
| REPEATABLE READ：可重复读  | 解决     | 解决       | 可能发生 |
| SERIALIZABLE：可串行化     | 解决     | 解决       | 解决     |

### 数据库三大范式

- **第一范式**

  一列不能有多个值

- **第二范式**，属性完全依赖于主键 [ 消除部分子函数依赖 ]

  非主属性完全依赖于主关键字

- **第三范式** 属性不依赖于其它非主属性 [ 消除传递依赖 ]

